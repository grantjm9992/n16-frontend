"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[448],{9632:(v,g,n)=>{n.d(g,{n:()=>e});var u=n(5384),l=n(4650);let e=(()=>{class i extends u.s{getAll(r=""){return this.get(`${this.getUrl()}?${r}`)}find(r){return this.get(`${this.getUrl()}/${r}`)}create(r){return this.post(`${this.getUrl()}`,r)}update(r,c){return this.post(`${this.getUrl()}/${r}`,c)}remove(r){return this.delete(`${this.getUrl()}/${r}`)}}return i.\u0275fac=function(){let a;return function(c){return(a||(a=l.n5z(i)))(c||i)}}(),i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5954:(v,g,n)=>{n.d(g,{s:()=>e});var u=n(5384),l=n(4650);let e=(()=>{class i extends u.s{getCompanies(){return this.get("/companies")}getCompany(r){return this.get(`/companies/${r}`)}updateCompany(r,c){return this.post(`/companies/${r}`,c)}createCompany(r){return this.post("/companies",r)}}return i.\u0275fac=function(){let a;return function(c){return(a||(a=l.n5z(i)))(c||i)}}(),i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},6445:(v,g,n)=>{n.r(g),n.d(g,{LogsModule:()=>U});var u=n(6895),l=n(9585),e=n(4650),i=n(7388),a=n(3599),r=n(8782),c=n(5954),f=n(317),y=n(9177),h=n(433);const C=function(o){return{entity:o}};function _(o,d){1&o&&e._UZ(0,"ngx-json-viewer",25),2&o&&e.Q6J("json",e.VKq(2,C,d.row.original_entity))("expanded",!1)}function b(o,d){1&o&&e._UZ(0,"ngx-json-viewer",25),2&o&&e.Q6J("json",e.VKq(2,C,d.row.updated_entity))("expanded",!1)}const A=[{path:"",component:(()=>{class o{constructor(t,s,m,p,T,M){this.historyService=t,this.router=s,this.activatedRoute=m,this.datePipe=p,this.userApiService=T,this.companyApiService=M,this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=l.hq,this.companies=[],this.users=[],this.selectedCompany=null,this.selectedUser=null,this.dateStart="",this.dateEnd="",this.searchTerm=""}makeDate(t){return this.datePipe.transform(t,"d/M/Y H:mm:ss")}pipeEntity(t){return JSON.stringify(t)}ngOnInit(){this.historyService.getAll().subscribe(t=>{this.rows=t.data,this.loadingIndicator=!1}),this.userApiService.getUsers().subscribe(t=>{this.users=t.data}),this.companyApiService.getCompanies().subscribe(t=>{this.companies=t.data})}buildQueryString(){let t="&";return this.selectedUser&&(t+=`user_id=${this.selectedUser}&`),this.searchTerm&&""!==this.searchTerm&&(t+=`q=${this.searchTerm}&`),t}filter(){this.loadingIndicator=!0,console.log(this.selectedUser);let t=this.buildQueryString();this.historyService.getAll(t).subscribe(s=>{this.rows=s.data,this.loadingIndicator=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.Q),e.Y36(a.F0),e.Y36(a.gz),e.Y36(u.uU),e.Y36(r.Q),e.Y36(c.s))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-logs"]],decls:37,vars:8,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],[1,"col-12","col-md-6"],["bindLabel","name","bindValue","id",3,"items","ngModel","change","ngModelChange"],[1,"col-8"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4"],["tabindex","-1","role","button",1,"btn","btn-primary",3,"click"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit"],["name","User","prop","user"],["name","Action","prop","action"],["name","Entity","prop","entity"],["name","Updated at","prop","updated_at"],["name","Original entity"],["ngx-datatable-cell-template",""],["name","Updated entity"],[3,"json","expanded"]],template:function(t,s){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Logs"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Log of changes"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12," Logs "),e.qZA(),e.TgZ(13,"div",5)(14,"div",10)(15,"label"),e._uU(16,"User"),e.qZA(),e.TgZ(17,"ng-select",11),e.NdJ("change",function(){return s.filter()})("ngModelChange",function(p){return s.selectedUser=p}),e.qZA()(),e.TgZ(18,"div",10)(19,"label"),e._uU(20,"Search term"),e.qZA(),e.TgZ(21,"div",5)(22,"div",12)(23,"input",13),e.NdJ("ngModelChange",function(p){return s.searchTerm=p}),e.qZA()(),e.TgZ(24,"div",14)(25,"div",15),e.NdJ("click",function(){return s.filter()}),e._uU(26,"Search"),e.qZA()()()()(),e.TgZ(27,"div",16)(28,"ngx-datatable",17),e._UZ(29,"ngx-datatable-column",18)(30,"ngx-datatable-column",19)(31,"ngx-datatable-column",20)(32,"ngx-datatable-column",21),e.TgZ(33,"ngx-datatable-column",22),e.YNc(34,_,1,4,"ng-template",23),e.qZA(),e.TgZ(35,"ngx-datatable-column",24),e.YNc(36,b,1,4,"ng-template",23),e.qZA()()()()()()()),2&t&&(e.xp6(17),e.Q6J("items",s.users)("ngModel",s.selectedUser),e.xp6(6),e.Q6J("ngModel",s.searchTerm),e.xp6(5),e.Q6J("rows",s.rows)("loadingIndicator",s.loadingIndicator)("columnMode",s.ColumnMode.force)("footerHeight",50)("limit",10))},dependencies:[a.yS,l.nE,l.UC,l.vq,f.Y,y.w9,h.Fj,h.JJ,h.On]}),o})()}];let U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,a.Bz.forChild(A),l.xD,f.s,y.A0,h.u5]}),o})()}}]);