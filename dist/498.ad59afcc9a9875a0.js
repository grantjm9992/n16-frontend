"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[498],{9632:(f,u,n)=>{n.d(u,{n:()=>e});var p=n(5384),l=n(4650);let e=(()=>{class o extends p.s{getAll(a=""){return this.get(`${this.getUrl()}?${a}`)}find(a){return this.get(`${this.getUrl()}/${a}`)}create(a){return this.post(`${this.getUrl()}`,a)}update(a,d){return this.post(`${this.getUrl()}/${a}`,d)}remove(a){return this.delete(`${this.getUrl()}/${a}`)}}return o.\u0275fac=function(){let i;return function(d){return(i||(i=l.n5z(o)))(d||o)}}(),o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5954:(f,u,n)=>{n.d(u,{s:()=>e});var p=n(5384),l=n(4650);let e=(()=>{class o extends p.s{getCompanies(){return this.get("/companies")}getCompany(a){return this.get(`/companies/${a}`)}updateCompany(a,d){return this.post(`/companies/${a}`,d)}createCompany(a){return this.post("/companies",a)}}return o.\u0275fac=function(){let i;return function(d){return(i||(i=l.n5z(o)))(d||o)}}(),o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},3130:(f,u,n)=>{n.r(u),n.d(u,{EventLogsModule:()=>A});var p=n(6895),l=n(9585),e=n(4650),o=n(7388),i=n(3599),a=n(8782),d=n(5954),m=n(433),S=n(9061);let C=(()=>{class s{constructor(t,r,h,g,c,M){this.historyService=t,this.router=r,this.activatedRoute=h,this.datePipe=g,this.userApiService=c,this.companyApiService=M,this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=l.hq,this.companies=[],this.users=[],this.selectedCompany=null,this.selectedUser=null,this.dateStart="",this.dateEnd="",this.teacherSearch="",this.userSearch="",this.nameSearch=""}ngOnInit(){this.filter(),this.userApiService.getUsers().subscribe(t=>{this.users=t.data}),this.companyApiService.getCompanies().subscribe(t=>{this.companies=t.data})}buildQueryString(){let t="&";if(this.selectedUser&&(t+=`user_id=${this.selectedUser}&`),this.userSearch&&""!==this.userSearch&&(t+=`user=${this.userSearch}&`),this.nameSearch&&""!==this.nameSearch&&(t+=`name=${this.nameSearch}&`),this.teacherSearch&&""!==this.teacherSearch&&(t+=`teacher=${this.teacherSearch}&`),this.dateSearch&&""!==this.dateSearch){let r=this.dateSearch;"string"!=typeof this.dateSearch&&(r=this.getDateString(this.dateSearch)),t+=`date=${r}&`}return t}getDateString(t){return`${t.year}-${this.pad(t.month)}-${this.pad(t.day)}`}pad(t,r=2){let h=t+"";for(;h.length<r;)h="0"+h;return h}filter(){this.loadingIndicator=!0;let t=this.buildQueryString();this.historyService.getEventLogs(t).subscribe(r=>{this.rows=r.data,this.loadingIndicator=!1})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(o.Q),e.Y36(i.F0),e.Y36(i.gz),e.Y36(p.uU),e.Y36(a.Q),e.Y36(d.s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-event-logs"]],decls:51,vars:9,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],[1,"col-12","col-md-6"],[1,"form-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","start_date","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange"],["date","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["tabindex","-1","role","button",1,"btn","btn-primary","mt-2","mb-2",3,"click"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit"],["name","User","prop","user"],["name","Date changed","prop","date_changed"],["name","Name","prop","name"],["name","Original teacher","prop","original_teacher"],["name","New teacher","prop","new_teacher"],["name","Original classroom","prop","original_classroom"],["name","New classroom","prop","new_classroom"],["name","Original start","prop","original_start_date"],["name","New start","prop","new_start_date"]],template:function(t,r){if(1&t){const h=e.EpF();e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Event logs"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Log of event changes"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12," Logs "),e.qZA(),e.TgZ(13,"div",5)(14,"div",10)(15,"div",11)(16,"label"),e._uU(17,"User search"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(c){return r.userSearch=c}),e.qZA()()(),e.TgZ(19,"div",10)(20,"div",11)(21,"label"),e._uU(22,"Teacher search"),e.qZA(),e.TgZ(23,"input",12),e.NdJ("ngModelChange",function(c){return r.teacherSearch=c}),e.qZA()()(),e.TgZ(24,"div",10)(25,"div",11)(26,"label"),e._uU(27,"Name search"),e.qZA(),e.TgZ(28,"input",12),e.NdJ("ngModelChange",function(c){return r.nameSearch=c}),e.qZA()()(),e.TgZ(29,"div",10)(30,"div",11)(31,"label"),e._uU(32,"Event date"),e.qZA(),e.TgZ(33,"div",13)(34,"input",14,15),e.NdJ("ngModelChange",function(c){return r.dateSearch=c}),e.qZA(),e.TgZ(36,"button",16),e.NdJ("click",function(){e.CHM(h);const c=e.MAs(35);return e.KtG(c.toggle())}),e._UZ(37,"i",17),e.qZA()()()()(),e.TgZ(38,"div",18),e.NdJ("click",function(){return r.filter()}),e._uU(39,"Search"),e.qZA(),e.TgZ(40,"div",19)(41,"ngx-datatable",20),e._UZ(42,"ngx-datatable-column",21)(43,"ngx-datatable-column",22)(44,"ngx-datatable-column",23)(45,"ngx-datatable-column",24)(46,"ngx-datatable-column",25)(47,"ngx-datatable-column",26)(48,"ngx-datatable-column",27)(49,"ngx-datatable-column",28)(50,"ngx-datatable-column",29),e.qZA()()()()()()}2&t&&(e.xp6(18),e.Q6J("ngModel",r.userSearch),e.xp6(5),e.Q6J("ngModel",r.teacherSearch),e.xp6(5),e.Q6J("ngModel",r.nameSearch),e.xp6(6),e.Q6J("ngModel",r.dateSearch),e.xp6(7),e.Q6J("rows",r.rows)("loadingIndicator",r.loadingIndicator)("columnMode",r.ColumnMode.force)("footerHeight",50)("limit",10))},dependencies:[i.yS,l.nE,l.UC,m.Fj,m.JJ,m.On,S.J4]}),s})();var y=n(317),_=n(9177);const b=[{path:"",component:C}];let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,i.Bz.forChild(b),l.xD,y.s,_.A0,m.u5,S.M]}),s})()}}]);