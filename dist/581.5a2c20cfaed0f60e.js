"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[581],{9632:(g,h,a)=>{a.d(h,{n:()=>e});var d=a(5384),u=a(4650);let e=(()=>{class n extends d.s{getAll(s=""){return this.get(`${this.getUrl()}?${s}`)}find(s){return this.get(`${this.getUrl()}/${s}`)}create(s){return this.post(`${this.getUrl()}`,s)}update(s,i){return this.post(`${this.getUrl()}/${s}`,i)}remove(s){return this.delete(`${this.getUrl()}/${s}`)}}return n.\u0275fac=function(){let l;return function(i){return(l||(l=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},6347:(g,h,a)=>{a.d(h,{s:()=>e});var d=a(9632),u=a(4650);let e=(()=>{class n extends d.n{getClassrooms(s=""){return this.get(`/classroom?company_id=${s}`)}getClassroom(s){return this.get(`/classroom/${s}`)}createClassroom(s){return this.post("/classroom",s)}updateClassroom(s,i){return this.post(`/classroom/${s}`,i)}getUrl(){return"/classroom"}}return n.\u0275fac=function(){let l;return function(i){return(l||(l=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},3581:(g,h,a)=>{a.r(h),a.d(h,{ClassroomModule:()=>T});var d=a(6895),u=a(9585),e=a(4650),n=a(6347),l=a(3599);let s=(()=>{class r{constructor(o,t,m){this.classroomApiService=o,this.router=t,this.activatedRoute=m,this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=u.hq}ngOnInit(){this.classroomApiService.getClassrooms().subscribe(o=>{this.rows=o.data,this.loadingIndicator=!1})}onRowClicked(o){"click"===o.type&&this.router.navigate([o.row.id],{relativeTo:this.activatedRoute})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(n.s),e.Y36(l.F0),e.Y36(l.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-classroom"]],decls:20,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],["routerLink","new","tabindex","-1","role","button",1,"btn","btn-primary"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit","activate"],["name","Name","prop","name"],["name","Order","prop","order"],["name","Company","prop","company.name"]],template:function(o,t){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Classrooms"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"List"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12," Classrooms "),e.TgZ(13,"a",10),e._uU(14,"New"),e.qZA()(),e.TgZ(15,"div",11)(16,"ngx-datatable",12),e.NdJ("activate",function(p){return t.onRowClicked(p)}),e._UZ(17,"ngx-datatable-column",13)(18,"ngx-datatable-column",14)(19,"ngx-datatable-column",15),e.qZA()()()()()()),2&o&&(e.xp6(16),e.Q6J("rows",t.rows)("loadingIndicator",t.loadingIndicator)("columnMode",t.ColumnMode.force)("footerHeight",50)("limit",10))},dependencies:[l.yS,u.nE,u.UC]}),r})();var i=a(433),f=a(5954),v=a(8386);function _(r,c){1&r&&e._UZ(0,"input",23),2&r&&e.Q6J("hidden",!0)}function C(r,c){if(1&r&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&r){const o=c.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.name)}}function b(r,c){if(1&r&&(e.TgZ(0,"div",11)(1,"label",24),e._uU(2,"Company"),e.qZA(),e.TgZ(3,"select",25),e.YNc(4,C,2,2,"option",26),e.qZA()()),2&r){const o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.companies)}}function y(r,c){if(1&r&&(e.TgZ(0,"p",28),e._uU(1),e.qZA()),2&r){const o=c.$implicit;e.xp6(1),e.Oqu(o)}}let A=(()=>{class r{constructor(o,t,m,p,S,E){this.router=o,this.activatedRoute=t,this.classroomApiService=m,this.companyApiService=p,this.userService=S,this.formBuilder=E,this.error=[],this.companies=[],this.classroom=null,this.id=null}ngOnInit(){this.classroomForm=this.formBuilder.group({name:["",i.kI.required],order:["",i.kI.required],capacity:["",i.kI.required],company_id:[null,i.kI.required]}),this.activeUser=this.userService.getUser(),"super_admin"!==this.activeUser.user_role&&"admin"!==this.activeUser.user_role&&this.classroomForm.patchValue({company_id:this.activeUser.company_id}),this.companyApiService.getCompanies().subscribe(o=>{this.companies=o.data}),this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.activatedRoute.paramMap.subscribe(o=>{console.log(o.get("id"));let t=o.get("id");null===t||"new"===t||this.classroomApiService.getClassroom(t).subscribe(m=>{this.classroom=m.data,this.classroomForm.patchValue(m.data)})})}onTextColourChange(o){this.classroomForm.patchValue({text_colour:o})}onFillColourChange(o){this.classroomForm.patchValue({fill_colour:o})}onSubmit(){this.error=[];const o={...this.classroom,...this.classroomForm.value};"new"!==this.id?this.classroomApiService.updateClassroom(this.classroom.id,o).subscribe(()=>{this.router.navigate(["/classroom"])},t=>{if(t.errors)for(let m in t.errors)t.errors[m].forEach(p=>{this.error.push(p)});else this.error.push(t.message)}):this.classroomApiService.createClassroom(o).subscribe(()=>{this.router.navigate(["/classroom"])},t=>{if(t.errors)for(let m in t.errors)t.errors[m].forEach(p=>{this.error.push(p)});else this.error.push(t.message)})}delete(){this.classroomApiService.remove(this.classroom.id).subscribe(o=>{this.router.navigate(["/classroom"])})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(l.F0),e.Y36(l.gz),e.Y36(n.s),e.Y36(f.s),e.Y36(v.K),e.Y36(i.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit"]],decls:35,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","../"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","autocomplete","off","placeholder","Name","formControlName","name",1,"form-control"],["class","form-control wd-150","formControlName","company_id",3,"hidden",4,"ngIf"],["class","mb-3",4,"ngIf"],["for","capacity",1,"form-label"],["type","integer","id","capacity","autocomplete","off","placeholder","Capacity","formControlName","capacity",1,"form-control"],["type","integer","id","order","autocomplete","off","placeholder","Order","formControlName","order",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2"],["routerLink","../",1,"btn","btn-secondary","me-2"],[1,"btn","btn-danger",3,"click"],["class","text-danger mt-1",4,"ngFor","ngForOf"],["formControlName","company_id",1,"form-control","wd-150",3,"hidden"],["for","company_id",1,"form-label"],["id","company_id","formControlName","company_id",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger","mt-1"]],template:function(o,t){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Classrooms"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"Classroom"),e.qZA(),e.TgZ(13,"form",10),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.YNc(18,_,1,1,"input",14),e.YNc(19,b,5,1,"div",15),e.TgZ(20,"div",11)(21,"label",16),e._uU(22,"Capacity"),e.qZA(),e._UZ(23,"input",17),e.qZA(),e.TgZ(24,"div",11)(25,"label",16),e._uU(26,"Order"),e.qZA(),e._UZ(27,"input",18),e.qZA(),e.TgZ(28,"button",19),e._uU(29,"Submit"),e.qZA(),e.TgZ(30,"div",20),e._uU(31,"Cancel"),e.qZA(),e.TgZ(32,"div",21),e.NdJ("click",function(){return t.delete()}),e._uU(33,"Delete"),e.qZA()(),e.YNc(34,y,2,1,"p",22),e.qZA()()()()),2&o&&(e.xp6(6),e.Oqu(null===t.classroom?"Edit":"New"),e.xp6(7),e.Q6J("formGroup",t.classroomForm),e.xp6(5),e.Q6J("ngIf","super_admin"!==t.activeUser.user_role&&"admin"!==t.activeUser.user_role),e.xp6(1),e.Q6J("ngIf","super_admin"==t.activeUser.user_role||"admin"==t.activeUser.user_role),e.xp6(15),e.Q6J("ngForOf",t.error))},dependencies:[d.sg,d.O5,l.rH,l.yS,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u]}),r})();var Z=a(2851);const U=[{path:"",component:s},{path:":id",component:A}];let T=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,l.Bz.forChild(U),u.xD,i.u5,i.UX,Z.e4]}),r})()}}]);